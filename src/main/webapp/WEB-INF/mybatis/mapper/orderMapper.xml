<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="order">

<!-- 글개수 -->
	<select id="dataCount" parameterType="map" resultType="Integer">
		SELECT NVL(COUNT(*), 0) FROM orders
	</select>

	<!-- 글리스트 -->
	<select id="listBoard" parameterType="map" resultType="com.hotbody.order.Order">
		SELECT * FROM (
		SELECT ROWNUM rnum, tb.* FROM (
		SELECT num, b.userId, userName, subject
		,TO_CHAR(b.created, 'YYYY-MM-DD') created
		,hitCount, saveFilename
		FROM bbs b JOIN member1 m ON b.userId=m.userId
		<where>
			<if test="searchValue != null and searchValue != ''">
				<include refid="where-list" />
			</if>
		</where>
		ORDER BY num DESC
	<![CDATA[
	        ) tb WHERE ROWNUM <= #{end}
	    ) WHERE rnum >= #{start}
	]]>
	</select>

</mapper>